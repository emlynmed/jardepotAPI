var show=16,order="default";function reloadProducts(){var e=window.location.href.split("/"),t=[];(e="busqueda"===e[e.length-2]||"ofertas"===e[e.length-1])?(t.url=ruta+"products/getProductsOrdered",t.data={order:order,word:$("#word-search").val()}):(t.url=ruta+"products/getProductsFiltered",t.data={order:order,filters:filters,level1:$("#level1").val(),level2:$("#level2").val()}),t.dataType="json",t.type="get",t.success=function(t){e?$("#cards-sections-search").html(""):$("#cards-sections").html(""),$.each(t,function(t,a){var s="";a.hasOwnProperty("discount")&&(s='<img src="'+ruta+'assets/images/ofertas/oferta-0.png" style="width: 80px;position: absolute;top: 0;left: 0;">');var i="";t>7&&(i="d-none");var n='<div class="card shadow-sm product-item col-sm-6 col-md-4 col-lg-3 p-0 mt-2 '+i+'" style="border-radius: 5px;overflow: hidden;">                                <a href="'+ruta+"catalogo/"+a.brand.toLowerCase().replace(" ","-")+"/"+a.productType.toLowerCase()+"-"+a.brand.toLowerCase().replace(" ","-")+"-"+a.mpn.toLowerCase()+'">                                    '+s+'                                    <div class="product-image" style="height: 205px">                                        <img style="max-width: 80%; max-height: 100%;"                                             src="'+ruta+a.images[0].medium+'"                                             title="'+a.name+'" alt="'+a.name+'">                                    </div>';a.newPriceFloat>3e3&&(n+='                                    <img class="free-delivery-prods" src="'+ruta+'assets/images/otros/gratis.png"                                         title="Envío gratis Jardepot" alt="Envío gratis Jardepot">'),n+='                                </a>                                <div class="d-flex align-items-center flex-column" style="height: 277px;">                                    <p class="text-muted text-center"                                       style="font-weight: 500; font-size: 18px;">'+a.name+"</p>",a.stock?n+='                                    <p class="old-price" style="height: 21px;">                                        '+(a.hasOwnProperty("oldPrice")?a.oldPrice:"")+'                                    </p>                                    <p class="new-price">'+a.newPrice+'</p>                                    <p class="little-letters">Precio aplica en pagos mediante depósito o transferencia bancaria.</p>                                    <button class="btn btn-buy d-flex justify-content-center align-items-center"                                       onclick="buyProduct(\''+a.productType+"','"+a.brand+"','"+a.mpn+'\')">                                        <i class="material-icons" style="font-size: 16px;">shopping_cart</i> Comprar                                    </button>                                    <p class="envio-volada d-flex justify-content-center align-items-center my-2"                                       style="height: 24px; max-height: 24px;">                                        '+(a.inventory>0?'<i class="material-icons" style="font-size: 16px;">flash_on</i>Envio de volada':"")+'                                    </p>                                    <p class="little-letters">*Envio gratis a partir de $3,000 de compra</p>                                    <p class="little-letters">*Consulte condiciones.</p>                                    <p class="product-description p-2 text-center text-truncate" data-toggle="tooltip"                                       data-placement="bottom"                                       style="min-height: 74px; max-height: 74px; white-space: normal;"                                       title="'+a.description+'">                                        '+a.description+"                                    </p>":n+='<p class="little-letters">*Envio gratis a partir de $3,000 de compra</p>       <p class="little-letters">*Consulte condiciones.</p>       <p class="product-description p-2 text-center text-truncate" data-toggle="tooltip"           data-placement="bottom"           style="min-height: 74px; max-height: 74px; white-space: normal;"           title="'+a.description+'">               '+a.description.substring(0,70)+'       </p>       <p class="text-center mt-3" style="color: rgba(0,0,0,.54)!important; font-weight: 900; font-size: 15px; ">Consulta precio y existencia Llámanos al teléfono</p>       <p style="font-weight: 900; font-size: 18px; color: #de1f21;">800 212 9225</p>',n+='                            </div>                                <hr>                                <div class="d-flex align-items-center flex-column">                                   <div style="height: 36px">',a.stock&&(n+='                                <button type="button" onclick="verifyAddCartProduct(\''+a.productType+"','"+a.brand+"','"+a.mpn+'\',1)"                                            class="btn-add-cart d-flex justify-content-center align-items-center"                                            style="font-size: 14px;">                                        <i class="material-icons fn-color-jd">shopping_cart</i>                                        <span class="text-muted" style="font-size: 14px; font-weight: 500;">Agregar al carrito</span>                                    </button>'),n+='                               </div>                                    <p class="little-letters text-center">*Sujeto a existencias.</p>                                    <p class="little-letters text-center">*Precios sujetos a cambio sin previo                                        aviso.</p>                                </div>                            </div>',e?$("#cards-sections-search").append(n):$("#cards-sections").append(n)}),$(".page-item").removeClass("active"),$('.page-link[data-val="1"]').parent(".page-item").addClass("active"),$("#eight-products").click()},ajaxCall(t)}$(document).ready(function(){$(".number-items").click(function(){show=$(this).data("val");var e=$(".product-item").length/show;$(".number-page").addClass("d-none"),$(".pagination-container").each(function(t,a){$(a).find(".number-page").each(function(t,a){t<e&&$(a).removeClass("d-none")})}),$(".current-number-items").text(show),$(".page-item").removeClass("active"),$('.page-link[data-val="1"]').parent(".page-item").addClass("active"),$(".pagination .active").click()}),$(".page-item").click(function(){if(!$(this).hasClass("disabled")){switch($(".product-item").removeClass("d-none").addClass("d-none"),$(this).find("a").data("val")){case"--":var e=$(".pagination .active").find("a").data("val"),t=(a=(e-=1)*show)-show;$(".page-item").removeClass("active"),$('.page-link[data-val="'+e+'"]').parent(".page-item").addClass("active"),$(".product-item").each(function(e,s){e>=t&&e<a&&$(s).removeClass("d-none")});break;case"++":e=$(".pagination .active").find("a").data("val"),t=(a=(e+=1)*show)-show;$(".page-item").removeClass("active"),$('.page-link[data-val="'+e+'"]').parent(".page-item").addClass("active"),$(".product-item").each(function(e,s){e>=t&&e<a&&$(s).removeClass("d-none")});break;default:var a;e=$(this).find("a").data("val"),t=(a=e*show)-show;$(".page-item").removeClass("active"),$('.page-link[data-val="'+e+'"]').parent(".page-item").addClass("active"),$(".product-item").each(function(e,s){e>=t&&e<a&&$(s).removeClass("d-none")})}0===$('.page-link[data-val="'+(e+1)+'"]').length?$(".next-page").addClass("disabled"):$('.page-link[data-val="'+(e+1)+'"]').parent(".page-item").hasClass("d-none")?$(".next-page").addClass("disabled"):$(".next-page").removeClass("disabled"),0===$('.page-link[data-val="'+(e-1)+'"]').length?$(".previous-page").addClass("disabled"):$(".previous-page").removeClass("disabled")}}),$("#orderBy").change(function(){order=$(this).val(),reloadProducts()}),$("#form-failed").on("keypress",function(e){13==e.which&&$("#search-form").submit()}),$("#btn-form").click(function(){$("#form-failed").submit()}),$("#form-failed").submit(function(e){e.preventDefault()}).validate({rules:{nombre:{required:!0,minlength:3,maxlength:60},telefono:{required:!0,digits:!0,minlength:10,maxlength:10},comentario:{maxlength:100}},messages:{nombre:{required:"Introduce tu nombre.",maxlength:"Debe contener máximo 60.",minlength:"Debe contener mínimo 3 letras."},telefono:{required:"Introduce tu teléfono.",digits:"Introduce un número válido.",maxlength:"Debe contener 10 dígitos.",minlength:"Debe contener 10 dígitos."},comentario:{maxlength:"Debe contener máximo de 100."}},submitHandler:function(){var e=$("#name").val(),t=$("#phone").val(),a=$("#coments").val(),s=$("#word-search").val(),i=[];i.url=ruta+"products/searchFailed",i.type="POST",i.dataType="json",i.data={name:e,phone:t,search:s,coments:a},i.success=function(e){!0===e.resultado&&($("#container-form").removeClass("d-flex").addClass("d-none"),$("#container-form-sent").removeClass("d-none").addClass("d-flex"))},ajaxCall(i)}})});
